//>>built
define("dojox/charting/plot2d/Scatter","dojo/_base/lang,dojo/_base/array,dojo/_base/declare,./CartesianBase,./_PlotEvents,./common,dojox/lang/functional,dojox/lang/functional/reversed,dojox/lang/utils,dojox/gfx/fx,dojox/gfx/gradutils".split(","),function(m,n,x,y,z,u,A,B,o,C,D){var E=B.lambda("item.purgeGroup()");return x("dojox.charting.plot2d.Scatter",[y,z],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",
styleFunc:null},constructor:function(g,d){this.opt=m.clone(m.mixin(this.opt,this.defaultParams));o.updateWithObject(this.opt,d);o.updateWithPattern(this.opt,d,this.optionalParams);this.animate=this.opt.animate},render:function(g,d){if(this.zoom&&!this.isDataDirty())return this.performZoom(g,d);this.resetEvents();this.dirty=this.isDirty();var i;if(this.dirty)n.forEach(this.series,E),this._eventSeries={},this.cleanGroup(),i=this.getGroup(),A.forEachRev(this.series,function(a){a.cleanGroup(i)});for(var p=
this.chart.theme,m=this.events(),s=this.series.length-1;0<=s;--s){var a=this.series[s];if(!this.dirty&&!a.dirty)p.skip(),this._reconnectEvents(a.name);else if(a.cleanGroup(),a.data.length){var t=p.next("marker",[this.opt,a]),e,o=this._hScaler.scaler.getTransformerFromModel(this._hScaler),v=this._vScaler.scaler.getTransformerFromModel(this._vScaler);i=a.group;e="number"==typeof a.data[0]?n.map(a.data,function(a,b){return{x:o(b+1)+d.l,y:g.height-d.b-v(a)}},this):n.map(a.data,function(a){return{x:o(a.x)+
d.l,y:g.height-d.b-v(a.y)}},this);var q=Array(e.length),h=Array(e.length),r=Array(e.length);n.forEach(e,function(l,b){var f=a.data[b],c;this.opt.styleFunc||"number"!=typeof f?(c="number"!=typeof f?[f]:[],this.opt.styleFunc&&c.push(this.opt.styleFunc(f)),c=p.addMixin(t,"marker",c,!0)):c=p.post(t,"marker");var e="M"+l.x+" "+l.y+" "+c.symbol;c.marker.shadow&&(q[b]=i.createPath("M"+(l.x+c.marker.shadow.dx)+" "+(l.y+c.marker.shadow.dy)+" "+c.symbol).setStroke(c.marker.shadow).setFill(c.marker.shadow.color),
this.animate&&this._animateScatter(q[b],g.height-d.b));if(c.marker.outline){var j=u.makeStroke(c.marker.outline);j.width=2*j.width+c.marker.stroke.width;r[b]=i.createPath(e).setStroke(j);this.animate&&this._animateScatter(r[b],g.height-d.b)}var j=u.makeStroke(c.marker.stroke),k=this._plotFill(c.marker.fill,g,d);if(k&&("linear"===k.type||"radial"==k.type))if(k=D.getColor(k,{x:l.x,y:l.y}),j)j.color=k;h[b]=i.createPath(e).setStroke(j).setFill(k);this.opt.labels&&(e=h[b].getBoundingBox(),this.createLabel(i,
f,e,c));this.animate&&this._animateScatter(h[b],g.height-d.b)},this);if(h.length)a.dyn.marker=t.symbol,a.dyn.markerStroke=h[h.length-1].getStroke(),a.dyn.markerFill=h[h.length-1].getFill();if(m){var w=Array(h.length);n.forEach(h,function(d,b){var f={element:"marker",index:b,run:a,shape:d,outline:r&&r[b]||null,shadow:q&&q[b]||null,cx:e[b].x,cy:e[b].y};"number"==typeof a.data[0]?(f.x=b+1,f.y=a.data[b]):(f.x=a.data[b].x,f.y=a.data[b].y);this._connectEvents(f);w[b]=f},this);this._eventSeries[a.name]=
w}else delete this._eventSeries[a.name];a.dirty=!1}else a.dirty=!1,p.skip()}this.dirty=!1;return this},_animateScatter:function(g,d){C.animateTransform(m.delegate({shape:g,duration:1200,transform:[{name:"translate",start:[0,d],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})});